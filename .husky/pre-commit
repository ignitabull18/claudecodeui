echo "🔍 Running Claude CLI compliance checks..."

# Run Claude CLI compliance audit (informational)
echo "🔧 Running compliance audit..."
bun run audit:claude-compliance || echo "⚠️  Compliance violations found - see output above"

# Check for critical mock data violations (blocking)
echo "🚨 Checking for critical violations..."
if grep -r "generateMockAnalysisData\|mockData.*=\|demoMode.*=\|fallbackMode.*=" server/routes/ --include="*.js" > /dev/null 2>&1; then
  echo "❌ CRITICAL: Mock data or demo mode detected! This violates Claude CLI principle."
  echo "🛠️  Please remove all mock data and use Claude CLI instead."
  exit 1
fi

# Run lint check (warnings only, don't block commits)
echo "🔧 Running ESLint check..."
bun run lint:check || echo "⚠️  ESLint issues found - consider fixing for code quality"

echo "✅ No critical violations detected! Proceeding with commit."
echo "💡 Note: Run 'bun run audit:claude-compliance' to see all compliance suggestions."