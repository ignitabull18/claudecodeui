echo "ğŸ” Running Claude CLI compliance checks..."

# Run Claude CLI compliance audit (informational)
echo "ğŸ”§ Running compliance audit..."
bun run audit:claude-compliance || echo "âš ï¸  Compliance violations found - see output above"

# Check for critical mock data violations (blocking)
echo "ğŸš¨ Checking for critical violations..."
if grep -r "generateMockAnalysisData\|mockData.*=\|demoMode.*=\|fallbackMode.*=" server/routes/ --include="*.js" > /dev/null 2>&1; then
  echo "âŒ CRITICAL: Mock data or demo mode detected! This violates Claude CLI principle."
  echo "ğŸ› ï¸  Please remove all mock data and use Claude CLI instead."
  exit 1
fi

# Run lint check (warnings only, don't block commits)
echo "ğŸ”§ Running ESLint check..."
bun run lint:check || echo "âš ï¸  ESLint issues found - consider fixing for code quality"

echo "âœ… No critical violations detected! Proceeding with commit."
echo "ğŸ’¡ Note: Run 'bun run audit:claude-compliance' to see all compliance suggestions."